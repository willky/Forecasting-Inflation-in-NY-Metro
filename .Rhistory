mutate(ch_med = round(med_psft-lag(med_psft),2),
pch_med = (round((med_psft/lag(med_psft)-1), 3))
)
tc1.boros <- arms_length %>%
group_by(Borough_Name, sale_year) %>%
summarise(num_sales = n(),
total_sales = sum(sale_price),
med_price = median(sale_price)) %>%
mutate(ch_med = med_price-lag(med_price),
pch_med = round((med_price/lag(med_price))-1, 2)
)
tc1.boros %>%
select(Borough_Name, sale_year, med_price) %>%
mutate(med_price = dollar(med_price)) %>%
pivot_wider(names_from = sale_year,
values_from = med_price) %>%
kbl(align = "lrrrrrr") %>%
kable_classic_2(c("striped", "hovered"),
html_font = "calibri")
tc1.boros %>%
plot_ly(x = ~sale_year, y = ~ch_med, color = ~Borough_Name) %>%
add_bars()
tc1.boros %>%
plot_ly(x = ~sale_year, y = ~pch_med, color = ~Borough_Name) %>%
add_lines() %>%
layout(xaxis = list(title = ""),
yaxis = list(title = "",  tickformat = '%'),
title = "Percentage change in Median Prices")
tc1.neighs <- arms_length %>%
group_by(Borough_Name, neighborhood, sale_year) %>%
summarise(num_sales = n(),
total_sales = sum(sale_price),
med_price = median(sale_price)) %>%
mutate(ch_med = (med_price-lag(med_price)),
pch_med = round((med_price/lag(med_price))-1, 3)
)
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "BRONX" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "BROOKLYN" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "MANHATTAN" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "QUEENS" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "STATEN ISLAND" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "BRONX" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "BROOKLYN" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "MANHATTAN" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "QUEENS" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, med_price) %>%
filter(sale_year == max(tc1.neighs$sale_year) &
Borough_Name == "STATEN ISLAND" &
num_sales >= 3) %>%
arrange(desc(med_price)) %>%
mutate(med_price = dollar(med_price, 1)) %>%
select(- "sale_year") %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"No. of Transactions", "Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
caption = "Bottom 10 Neighborhoods with the Lowest Change in Median Prices",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BRONX" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BROOKLYN" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "MANHATTAN" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "QUEENS" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "STATEN ISLAND" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
caption = "Bottom 10 Neighborhoods with the Lowest Change in Median Prices",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BRONX" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BROOKLYN" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "MANHATTAN" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "QUEENS" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, ch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "STATEN ISLAND" &
num_sales >= 3) %>%
arrange(desc(ch_med)) %>%
mutate(ch_med = dollar(ch_med)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
caption = "Top 10 Neighborhoods with the Highest Change in Median Prices",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BRONX" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BROOKLYN" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "MANHATTAN" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "QUEENS" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "STATEN ISLAND" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
head(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
caption = "Bottom 10 Neighborhoods with the Lowest Change in Median Prices",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BRONX" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "BROOKLYN" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "MANHATTAN" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "QUEENS" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
tc1.neighs %>%
select(Borough_Name, neighborhood, sale_year, num_sales, pch_med) %>%
filter(sale_year == max(arms_length$sale_year) &
Borough_Name == "STATEN ISLAND" &
num_sales >= 3) %>%
arrange(desc(pch_med)) %>%
mutate(pch_med = percent(pch_med, accuracy = .1)) %>%
select(- c("sale_year", "num_sales")) %>%
tail(10) %>%
kbl(align = "llrr",
col.names = c("Borough", "Neighborhood",
"YoY Change in Median Price")) %>%
kable_classic_2(c("striped", "hover"),
html_font = "Calibri")
